<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>番茄钟</title>
		<link rel="stylesheet" href="./index.css" />
		<link rel="apple-touch-icon" sizes="180x180" href="./icons/appletouch.png" />
		<link rel="icon" type="image/png" sizes="32x32" href="./icons/favicon.png" />
		<link rel="manifest" href="./site.webmanifest" />
		<link rel="manifest" href="./manifest.json">
		<meta name="theme-color" id="theme-meta" content="#222233" />
	</head>
	<body>
		<button id="menubtn" title="Open Settings"></button>
		<div id="taskswitcher">
			<button id="statbtn" title="View Statistics">
				<span id="statline1"></span>
				<span id="statline2"></span>
				<span id="statline3"></span>
			</button>
			<select name="task" id="task-select" title="Switch Task"></select>
			<div id="no-task-title" title="No Task Found">Tomodoro</div>
			<button id="managetaskbtn" title="Manage Task">
				<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
					<path
						d="M6 34.5V42h7.5l22.13-22.13-7.5-7.5L6 34.5zm35.41-20.41c.78-.78.78-2.05 0-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83 0l-3.66 3.66 7.5 7.5 3.66-3.66z"
					/>
				</svg>
			</button>
		</div>
		<button id="popupbtn" title="Toggle PIP Mode">
			<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
				<path
					d="M38 14H22v12h16V14zm4-8H6c-2.21 0-4 1.79-4 4v28c0 2.21 1.79 3.96 4 3.96h36c2.21 0 4-1.76 4-3.96V10c0-2.21-1.79-4-4-4zm0 32.03H6V9.97h36v28.06z"
				/>
			</svg>
		</button>
		<main id="main">
			<div id="timer" class="t-focus">
				<svg id="ring" viewbox="0 0 100 100">
					<circle id="secondary" cx="50" cy="50" r="48" fill="none" />
					<circle id="progress" cx="50" cy="50" r="48" fill="none" pathlength="100" />
				</svg>
				<div id="time"></div>

				<div id="status">
					<span id="s-focus">专注</span>
					<span id="s-short">短暂休息</span>
					<span id="s-long">长时间休息</span>
				</div>
				<button id="pauseplay" class="paused" title="Start Timer">
					<svg id="playing" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
						<path
							d="M18 32h4V16h-4v16zm6-28C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm2-8h4V16h-4v16z"
						/>
					</svg>
					<svg id="paused" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
						<path
							d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"
						/>
					</svg>
				</button>
			</div>
			<button id="resetround" title="Reset Current Timer">
				<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
					<path d="M12 12h4v24h-4zm7 12l17 12V12z" />
				</svg>
			</button>
			<div id="roundno" title="Number of Focus Rounds"></div>
			<div id="slider-container">
				<div id="slider-overlay" class="disabled">
					<span id="volume-value">80</span>
					<input type="range" orient="vertical" id="volume-slider" min="0" max="100" step="1" value="80" />
				</div>
				<button id="volume-button" title="Adjust White Noise Volume">
					<svg id="volume-icon" class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960">
						<path
							d="M560-131v-82q90-26 145-100t55-168q0-94-55-168T560-749v-82q124 28 202 125.5T840-481q0 127-78 224.5T560-131ZM120-360v-240h160l200-200v640L280-360H120Zm440 40v-322q47 22 73.5 66t26.5 96q0 51-26.5 94.5T560-320ZM400-606l-86 86H200v80h114l86 86v-252ZM300-480Z"
						/>
					</svg>
					<svg
						id="volume-muted-icon"
						class="svg-icon"
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 -960 960 960"
					>
						<path
							xmlns="http://www.w3.org/2000/svg"
							d="M792-56 671-177q-25 16-53 27.5T560-131v-82q14-5 27.5-10t25.5-12L480-368v208L280-360H120v-240h128L56-792l56-56 736 736-56 56Zm-8-232-58-58q17-31 25.5-65t8.5-70q0-94-55-168T560-749v-82q124 28 202 125.5T840-481q0 53-14.5 102T784-288ZM650-422l-90-90v-130q47 22 73.5 66t26.5 96q0 15-2.5 29.5T650-422ZM480-592 376-696l104-104v208Zm-80 238v-94l-72-72H200v80h114l86 86Zm-36-130Z"
						/>
					</svg>
				</button>
			</div>
			<button id="next" title="Next Round">
				<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">
					<path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z" />
				</svg>
			</button>
		</main>
		<div id="menu" class="scrollbar">
			<div class="menu-title">番茄钟</div>
			<div class="content">
				<section class="section">
					<h2>计时器</h2>
					<div class="setting">
						<label for="focus-input">专注: <span></span></label>
						<div class="input-holder">
							<button class="ibtn" id="focus-dec">-</button>
							<input type="number" name="focus-input" id="focus-input" min="1" max="180" />
							<button class="ibtn" id="focus-inc">+</button>
							分钟
						</div>
					</div>
					<div class="setting">
						<label for="short-input">短暂休息: <span></span></label>
						<div class="input-holder">
							<button class="ibtn" id="short-dec">-</button>
							<input type="number" name="short-input" id="short-input" min="1" max="180" />
							<button class="ibtn" id="short-inc">+</button>
							分钟
						</div>
					</div>
					<div class="setting">
						<label for="long-input">长时间休息: <span></span></label>
						<div class="input-holder">
							<button class="ibtn" id="long-dec">-</button>
							<input type="number" name="long-input" id="long-input" min="1" max="180" />
							<button class="ibtn" id="long-inc">+</button>
							分钟
						</div>
					</div>
					<div class="setting">
						<label for="rounds-input">轮次</label>
						<br />
						长时间休息之间的专注会话数量。
						<div class="input-holder">
							<button class="ibtn" id="rounds-dec">-</button>
							<input type="number" name="rounds-input" id="rounds-input" min="1" max="18" />
							<button class="ibtn" id="rounds-inc">+</button>
							轮次
						</div>
					</div>
				</section>
				<section class="section">
					<h2>外观</h2>
					<div class="setting">
						<label for="theme-select">主题:</label>
						<select name="theme" id="theme-select" title="主题">
							<option value="dark" id="t-dark" selected>黑暗</option>
							<option value="black" id="t-black">黑色</option>
							<option value="light" id="t-light">亮色</option>
							<option value="white" id="t-white">白色</option>
						</select>
					</div>
					<div class="setting" id="accents">
						<h3>强调颜色:</h3>
						<div id="colors"></div>
					</div>
				</section>
				<section class="section">
					<h2>声音与通知</h2>
					<div class="setting">
						<label for="notif-select">通知:</label>
						<select name="notif" id="notif-select" title="通知类型">
							<option value="enabled">启用</option>
							<option value="silent">静音</option>
							<option value="disabled">禁用</option>
						</select>
						<br /><br />
						确保您的浏览器允许来自此站点的通知。
					</div>
					<div class="setting">
						<label for="audio-select">白噪音:</label>
						<select name="audio" id="audio-select" title="通知类型">
							<option value="disabled" selected>禁用</option>
							<option value="noise">启用</option>
						</select>
						<br /><br />
						如果启用，专注会话期间将播放白噪音。确保您的浏览器允许来自此站点的声音。
					</div>
				</section>
				<section class="section">
					<h2>备份与恢复</h2>
					<button id="create-backup" class="hover-shadow">创建备份</button>
					<label for="backup-restore" id="backup-restore-label" class="hover-shadow"
						><input type="file" accept=".json" id="backup-restore" />恢复备份</label
					>
				</section>
				<section class="section">
					<h2>关于番茄钟</h2>
					<div id="about-desc">
						番茄钟是一个开源的番茄工作法网页应用，具有离线支持和画中画模式等功能。
					</div>
					<a
						href="https://github.com/lazy-guy/tomodoro"
						id="github-link"
						target="_blank"
						class="button-link hover-shadow"
					>
						<img alt="GitHub" src="./GitHub-Mark-64px.png" />
						在 GitHub 上查看
					</a>
				</section>
				<section class="section">
					<h2>关于 PIP 模式</h2>
					番茄钟支持始终在最上面模式或画中画模式，无需安装任何电子应用程序即可在浏览器中使用。<br />
					PIP 模式在基于 Chromium 的浏览器中受支持（已在 Chrome 和 Edge 上测试）。<br />
					尚未测试 Safari（但可能有效）。<br />
					在桌面 Firefox 上，PIP 按钮只会使视频可见，但不会激活 PIP。要切换到 PIP 模式，请右键单击视频并选择“在画中画中观看”。
					<br /><br /><br />
					<h2>Android 上 Chrome 的 PIP 模式</h2>
					如果您使用的是 Android 上的 Chrome，则 PIP 按钮将使视频元素可见。要切换到 PIP 模式，请将视频全屏，然后通过按主屏幕按钮或使用导航手势返回设备的主屏幕，而不退出全屏。可以激活 PIP 模式。
				</section>
			</div>
		</div>
		<div id="statistics" class="scrollbar">
			<div class="menu-title">
				统计信息
				<button id="closestats" class="crossbtn" title="关闭统计信息"></button>
			</div>
			<div class="content">
				<div class="setting">
					<h3>显示统计信息：</h3>
					<div id="filters" class="scrollbar">
						<label class="task-chip">
							<input type="checkbox" id="all" checked />
							<span class="chip-task-name">所有任务</span>
						</label>
					</div>
				</div>
				<div class="setting">
					<label for="stat-time-select">时间段：</label>
					<select id="stat-time-select">
						<option value="0">今天</option>
						<option value="1">过去一天</option>
						<option value="7" selected>过去一周</option>
						<option value="365">过去一年</option>
						<option value="all">所有时间</option>
					</select>
				</div>
				<br /><br />
				<h2>概述</h2>
				<div id="stat-summary" class="remark">
					您专注的总时长为
					<span id="stat-summary-total"></span>
					包含
					<span id="stat-summary-rounds"></span>
					个专注轮次，平均轮次时长为
					<span id="stat-summary-average"></span>
					<br /><br />
					最短轮次时长：<span id="stat-summary-shortest"></span>
					<br />
					最长轮次时长：<span id="stat-summary-longest"></span>
				</div>
				<h2>时间分布：</h2>
				<div id="pie-container">
					<div id="pie">
						<svg viewbox="0 0 120 120"></svg>
					</div>
					<div id="pie-card-container" class="scrollbar"></div>
				</div>
				<h2>每个任务花费的时间：</h2>
				<div id="timespent" class="stat-chart scrollbar"></div>
				<br /><br />
				<h2>每6小时花费的时间：</h2>
				<div id="timesixhourly" class="stat-chart scrollbar">
					<div class="task-bar-container">
						<div class="legend">00:00 - 06:00</div>
						<div class="bar-container">
							<div class="bar" id="hourly-0-6">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">06:00 - 12:00</div>
						<div class="bar-container">
							<div class="bar" id="hourly-6-12">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">12:00 - 18:00</div>
						<div class="bar-container">
							<div class="bar" id="hourly-12-18">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">18:00 - 24:00</div>
						<div class="bar-container">
							<div class="bar" id="hourly-18-24">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
				</div>
				<div id="remark-hourly" class="remark">
					您在<span class="remark-value"></span>之间最为高效
				</div>
				<h2>每天花费的时间：</h2>
				<div id="timedaily" class="stat-chart scrollbar">
					<div class="task-bar-container">
						<div class="legend">星期一</div>
						<div class="bar-container">
							<div class="bar" id="day-monday">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">星期二</div>
						<div class="bar-container">
							<div class="bar" id="day-tuesday">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">星期三</div>
						<div class="bar-container">
							<div class="bar" id="day-wednesday">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">星期四</div>
						<div class="bar-container">
							<div class="bar" id="day-thursday">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">星期五</div>
						<div class="bar-container">
							<div class="bar" id="day-friday">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">星期六</div>
						<div class="bar-container">
							<div class="bar" id="day-saturday">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">星期天</div>
						<div class="bar-container">
							<div class="bar" id="day-sunday">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
				</div>
				<div id="remark-daily" class="remark">
					您在<span class="remark-value"></span>最为高效
				</div>
				<h2>每月花费的时间：</h2>
				<div id="timemonthly" class="stat-chart scrollbar">
					<div class="task-bar-container">
						<div class="legend">一月</div>
						<div class="bar-container">
							<div class="bar" id="month-january">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">二月</div>
						<div class="bar-container">
							<div class="bar" id="month-february">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">三月</div>
						<div class="bar-container">
							<div class="bar" id="month-march">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">四月</div>
						<div class="bar-container">
							<div class="bar" id="month-april">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">五月</div>
						<div class="bar-container">
							<div class="bar" id="month-may">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">六月</div>
						<div class="bar-container">
							<div class="bar" id="month-june">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">七月</div>
						<div class="bar-container">
							<div class="bar" id="month-july">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">八月</div>
						<div class="bar-container">
							<div class="bar" id="month-august">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">九月</div>
						<div class="bar-container">
							<div class="bar" id="month-september">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">十月</div>
						<div class="bar-container">
							<div class="bar" id="month-october">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">十一月</div>
						<div class="bar-container">
							<div class="bar" id="month-november">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
					<div class="task-bar-container">
						<div class="legend">十二月</div>
						<div class="bar-container">
							<div class="bar" id="month-december">
								<div class="stat-value">21:11</div>
							</div>
						</div>
					</div>
				</div>
				<div id="remark-monthly" class="remark">
					您在<span class="remark-value"></span>时最为高效
				</div>
				<details id="stat-details">
					<summary><h2>专注轮次记录</h2></summary>
					<div id="round-entries"></div>
				</details>
			</div>
		</div>
		<div id="managetasks" class="scrollbar">
			<div class="menu-title">
				任务
				<button id="closetasks" class="crossbtn" title="返回主屏幕"></button>
			</div>
			<div class="content">
				<h2>您的任务</h2>
				在这里您可以管理您的任务。
				<br /><br />
				<div id="task-container"></div>
				<form id="newtask" class="task">
					<input
						id="new-task-name"
						name="taskname"
						type="text"
						min="1"
						maxlength="25"
						placeholder="Add New Task"
					/>
					<button type="submit" title="Create new task" class="crossbtn" id="new-task-btn"></button>
				</form>
			</div>
		</div>
		<div id="firstload">
			<div id="firstloadcontent">
				<h2>欢迎使用 Tomodoro！</h2>
				Tomodoro 是一个开源的番茄钟网页应用，具有画中画模式、白噪音、任务、统计和离线支持等酷炫功能。
				<br /><br /><br />
				<h2>新功能</h2>
				<ul id="new-list">
					<li>
						<h3>任务和统计</h3>
						<div class="whats-new-desc">
							您现在可以创建任务并跟踪专注于这些任务的时间。所有数据都存储在您的浏览器中。
						</div>
					</li>
					<li>
						<h3>白噪音</h3>
						<div class="whats-new-desc">You can now listen to white noise during focus rounds.</div>
					</li>
				</ul>
				<br /><br />
				<h2>关于 PIP 模式</h2>
				Tomodoro 支持始终置顶模式，或浏览器中的画中画模式，无需安装任何 electron 应用程序。<br />
				PIP 模式支持基于 Chromium 的浏览器（在 Chrome 和 Edge 上测试过）。<br />
				Safari 尚未测试（但可能有效）。<br />
				在桌面版 Firefox 上，PIP 按钮只会使视频可见，但不会激活 PIP。要切换到 PIP 模式，请右键单击视频并选择“在画中画中观看”。
				<br /><br /><br />
				<h2>Chrome for Android 上的 PIP 模式</h2>
				如果您使用的是 Android 版 Chrome，那么 PIP 按钮将使视频元素可见。要切换到 PIP 模式，请使视频全屏，然后在不退出全屏的情况下转到设备的主屏幕（通过按主页按钮或使用导航手势）。PIP 模式将被激活。
			</div>
			<button id="closeintro" class="hover-shadow">Let's Get Started!</button>
		</div>
		<script src="./index.js"></script>
		<script>
			if ('serviceWorker' in navigator) {
			  window.addEventListener('load', function() {
				navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
				  console.log('Service Worker registered with scope:', registration.scope);
				}, function(error) {
				  console.log('Service Worker registration failed:', error);
				});
			  });
			}
		  </script>
	</body>
</html>
